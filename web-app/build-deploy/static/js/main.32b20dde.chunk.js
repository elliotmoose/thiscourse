(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{127:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),s=n(40),c=n.n(s),i=(n(82),n(22)),a=n(25),l=n(24),d=n(23),u=n(4),b=n(7),h=(n.p,n(53),n(5)),j=n(39),p=n(3),f=n.n(p),m=n(6),O=n(9),g={purple:"#8A99E7",green:"#3DCE66",blue:"#27ADE7",gray:"#B8B8B8",lightGray:"#F8F8F8",darkGray:"#484848"},x={normal:{fontFamily:"montserrat"},bold:{fontFamily:"montserrat",fontWeight:"bold"}},v=new(function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return n}(n(54)));function y(e){e?localStorage.setItem("username",e):localStorage.removeItem("username")}function w(){return localStorage.getItem("username")}function k(){return null!==w()&&void 0!==w()}function I(){return(I=Object(m.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.userLogin(t,n);case 2:e.sent?y(t):alert("Login failed: Wrong username or password"),v.emit("login-update");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(m.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(void 0),v.emit("login-update");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(m.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k()||console.error("WARNING: user not logged in"),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C={login:function(e,t){return I.apply(this,arguments)},logout:function(){return S.apply(this,arguments)},setUsername:y,getUsername:w,registerIfNeeded:function(e){return N.apply(this,arguments)},isLoggedIn:k,userEventEmitter:v},R=n(84),T="".concat("http://localhost",":").concat("9000");console.log("Server: ",T);var D,B,E=new(function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return n}(n(54))),L=!1,A=!1,U=!1;function M(e){B=e}function q(e){U=e,E.emit("update-is-online")}function z(e){A=e}function H(){return(H=Object(m.a)(f.a.mark((function e(t,n){var r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||alert("Please login again"),n||alert("Please enter a question"),e.next=4,fetch("".concat(T,"/api/create-session"),{method:"POST",body:JSON.stringify({username:t,discourse:n}),headers:{"Content-Type":"application/json"}});case 4:return r=e.sent,e.next=7,r.json();case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(m.a)(f.a.mark((function e(t,n){var r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=3;break}return console.error("no username or roomid specified"),e.abrupt("return");case 3:return e.prev=3,e.next=6,fetch("".concat(T,"/api/join-restart-session"),{method:"POST",body:JSON.stringify({username:t,roomId:n}),headers:{"Content-Type":"application/json"}});case 6:return r=e.sent,e.next=9,r.json();case 9:return o=e.sent,e.abrupt("return",o);case 13:return e.prev=13,e.t0=e.catch(3),e.abrupt("return",{error:e.t0.message});case 16:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function G(){return(G=Object(m.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{error:"no username provided"});case 2:return e.next=4,fetch("".concat(T,"/api/load-dashboard"),{method:"POST",body:JSON.stringify({username:t}),headers:{"Content-Type":"application/json"}});case 4:return n=e.sent,e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return new Promise((function(t,n){(D=new R("".concat(T,"/").concat(e))).on("connect",t),D.on("disconnect",(function(){console.log("==CLIENT DISCONNECT EVENT"),q(!1)})),D.on("error",(function(e){return alert(e)})),D.on("nodes-update",(function(e){if(!e||!e.nodes)return console.log("updated with null"),void console.log(e.nodes);console.log("= client: data received (".concat(Object.values(e.nodes).length," node(s))")),M(e.nodes),E.emit("nodes-update",e.nodes)})),D.on("check-is-owner",(function(e){e===C.getUsername()&&D.emit("claim-ownership",e)}))}))}function F(){return(F=Object(m.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==D){e.next=4;break}return console.warn("No socket found: reconnecting..."),e.next=4,P(t);case 4:D.emit("get-nodes",{roomId:t});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(m.a)(f.a.mark((function e(t,n,r,o){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==D){e.next=4;break}return console.error("No socket found: could not connect"),e.next=4,P(o);case 4:D.emit("add-node",{node:{username:t,question:n},parentId:r,roomId:o});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(m.a)(f.a.mark((function e(t,n,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==D){e.next=4;break}return console.error("No socket found: could not connect"),e.next=4,P(r);case 4:D.emit("mark-answer",{answerId:t,nodeId:n,roomId:r});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(m.a)(f.a.mark((function e(t,n){var r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/api/register-user"),{method:"POST",body:JSON.stringify({username:t,roomId:n}),headers:{"Content-Type":"application/json"}});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(o=e.sent).username){e.next=8;break}return e.abrupt("return",o.username);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(m.a)(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(T,"/api/login"),{method:"POST",body:JSON.stringify({username:t,password:n}),headers:{"Content-Type":"application/json"}});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!e.sent.success){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _={createSession:function(e,t){return H.apply(this,arguments)},joinOrRestartSession:function(e,t){return W.apply(this,arguments)},getIsOnline:function(){return U},setIsOnline:q,isInSession:function(){return A},setInSession:z,socketConnect:P,socketDisconnect:function(){console.log("=== disconnecting..."),D&&(D.disconnect(),D=void 0),z(!1)},requestNodeData:function(e){return F.apply(this,arguments)},addNode:function(e,t,n,r){return J.apply(this,arguments)},addAnswer:function(e,t,n,r){if(void 0===D)return console.error("No socket found: could not connect"),{};D.emit("answer",{answer:{username:e,content:t},nodeId:n,roomId:r})},apiEventEmitter:E,nodeData:B,getNodeData:function(){return B},setNodeData:M,getIsHost:function(){return L},setIsHost:function(e){L=e},markAsCorrectAnswer:function(e,t,n){return V.apply(this,arguments)},registerUser:function(e,t){return Q.apply(this,arguments)},userLogin:function(e,t){return Y.apply(this,arguments)},voteAnswer:function(e,t,n,r,o){if(void 0===D)return console.error("No socket found: could not connect"),{};D.emit("vote-answer",{up:e,username:t,answerId:n,nodeId:r,roomId:o})},loadDashboard:function(e){return G.apply(this,arguments)}},X=n(0),K=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={hover:!1},e}return Object(a.a)(n,[{key:"onMouseEnter",value:function(){this.setState({hover:!0})}},{key:"onMouseLeave",value:function(){this.setState({hover:!1})}},{key:"render",value:function(){return Object(X.jsx)("div",{style:Object(u.a)({display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",transform:this.state.hover&&"scale(1.03)",boxShadow:this.state.hover&&"2px 3px 10px rgba(0, 0, 0, 0.1)",transition:"0.2s",cursor:"pointer"},this.props.style),className:this.props.className,onMouseEnter:this.onMouseEnter.bind(this),onMouseLeave:this.onMouseLeave.bind(this),onClick:this.props.onClick,children:this.props.children})}}]),n}(o.a.Component),Z=function(){var e=Object(r.useRef)(),t=Object(r.useRef)(),n=Object(h.f)(),o=Object(r.useState)([]),s=Object(O.a)(o,2),c=s[0],i=s[1],a=Object(r.useState)([]),l=Object(O.a)(a,2),d=l[0],b=l[1];function j(){return(j=Object(m.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.logout();case 2:n.push("/login");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(m.a)(f.a.mark((function t(r){var o,s,c,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),o=C.getUsername(),s=e.current.value,t.next=5,_.createSession(o,s);case 5:if(c=t.sent){t.next=8;break}return t.abrupt("return");case 8:if(i=c.roomId){t.next=11;break}return t.abrupt("return");case 11:n.push("/session/".concat(i,"/"));case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(e){n.push("/session/".concat(e,"/"))}return Object(r.useEffect)((function(){Object(m.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.loadDashboard(C.getUsername());case 2:(t=e.sent).error?alert(t.error):(t.ownedRooms&&i(t.ownedRooms),t.prevRooms&&b(t.prevRooms));case 4:case"end":return e.stop()}}),e)})))()}),[]),Object(X.jsxs)("div",{className:"fullscreen",style:{display:"flex",flexDirection:"column"},children:[Object(X.jsxs)("div",{style:{flex:1,maxHeight:60,display:"flex",flexDirection:"row",margin:20,boxSizing:"border-box",alignItems:"center"},children:[Object(X.jsx)("div",{style:Object(u.a)(Object(u.a)({},x.bold),{},{color:g.purple,fontSize:"3rem"}),children:"Dialektik\xf3s"}),Object(X.jsx)("div",{style:{flex:1}}),Object(X.jsx)("div",{style:Object(u.a)(Object(u.a)({},x.bold),{},{color:g.gray,fontSize:"1rem"}),children:C.getUsername()}),Object(X.jsx)(K,{onClick:function(){return j.apply(this,arguments)},style:{height:60,width:60,backgroundColor:g.gray,borderRadius:30,marginLeft:20}})]}),Object(X.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(X.jsx)("div",{style:{flex:1},children:Object(X.jsxs)("div",{style:{width:300,marginLeft:40},children:[Object(X.jsx)("input",{style:Object(u.a)(Object(u.a)({},x.bold),{},{marginTop:20,boxSizing:"border-box",outline:0,border:0,borderRadius:8,backgroundColor:g.lightGray,height:50,width:"100%",padding:4,paddingLeft:14,marginBottom:8}),ref:e,placeholder:"Enter a Question"}),Object(X.jsx)(K,{style:Object(u.a)(Object(u.a)({},x.bold),{},{marginTop:20,backgroundColor:g.gray,height:50,width:"60%",borderRadius:8,color:"white"}),onClick:function(){prompt("Enter image URL")},children:Object(X.jsx)("div",{children:"Cover image"})}),Object(X.jsx)(K,{style:Object(u.a)(Object(u.a)({},x.bold),{},{marginTop:20,backgroundColor:g.green,height:50,width:"100%",borderRadius:8,color:"white"}),onClick:function(e){return p.apply(this,arguments)},children:Object(X.jsx)("div",{children:"Start a new Session"})}),Object(X.jsx)("div",{style:Object(u.a)(Object(u.a)({},x.bold),{},{color:g.purple,marginTop:20}),children:"Restart an old session:"}),c.map((function(e,t){return Object(X.jsx)(K,{onClick:function(){return v(e.id)},style:Object(u.a)(Object(u.a)({backgroundColor:"white",marginTop:20,height:60,borderRadius:8},x.bold),{},{color:g.darkGray}),children:e.question},"".concat(t))}))]})}),Object(X.jsx)("div",{style:{flex:1},children:Object(X.jsxs)("div",{style:{width:300,marginLeft:40},children:[Object(X.jsx)("input",{style:Object(u.a)(Object(u.a)({},x.bold),{},{marginTop:20,boxSizing:"border-box",outline:0,border:0,borderRadius:8,backgroundColor:g.lightGray,height:50,width:"100%",padding:4,paddingLeft:14,marginBottom:8}),ref:t,placeholder:"Enter a Session ID"}),Object(X.jsx)(K,{style:Object(u.a)(Object(u.a)({},x.bold),{},{marginTop:20,backgroundColor:g.green,height:50,width:"100%",borderRadius:8,color:"white"}),onClick:function(){v(t.current.value)},children:Object(X.jsx)("div",{children:"Join an active Session"})}),Object(X.jsx)("div",{style:Object(u.a)(Object(u.a)({},x.bold),{},{color:g.purple,marginTop:20}),children:"You also joined these Sessions"}),d.map((function(e,t){return Object(X.jsx)(K,{onClick:function(){return v(e.id)},style:Object(u.a)(Object(u.a)({backgroundColor:"white",marginTop:20,height:60,borderRadius:8},x.bold),{},{color:g.darkGray}),children:e.question},"".concat(t))}))]})})]})]})},$=n(75),ee=n.n($),te=n(76),ne=n.n(te),re=n(142);function oe(e){var t,n,r=e.nodeId,o=e.item,s=e.isAnswer,c=e.disabled,i=Object(h.g)().sessionId,a=_.getIsHost(i);function l(e){return d.apply(this,arguments)}function d(){return(d=Object(m.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.registerIfNeeded(i);case 2:e.sent&&(n=C.getUsername(),_.voteAnswer(t,n,o.id,r,i));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(X.jsxs)("div",{className:"discussion-box ".concat(s&&"correct-answer-box"),children:[a&&Object(X.jsx)(K,{disabled:c,onClick:function(){var e=o.id;_.markAsCorrectAnswer(e,r,i)},style:{position:"absolute",top:5,right:5,borderRadius:25,padding:6},children:Object(X.jsx)(re.a,{style:{height:25,width:25,color:s?"#87DEBF":"gray"}})}),Object(X.jsxs)("div",{className:"box-content",children:['"',o.content,'"']}),Object(X.jsxs)("div",{className:"box-name",children:["- ",o.username]}),Object(X.jsxs)("div",{className:"box-vote",children:[Object(X.jsx)("div",{disabled:c,onClick:function(){return l(!0)},className:"thumb",children:Object(X.jsx)(ee.a,{style:{color:"#87DEBF",width:18,height:18,cursor:"pointer"}})}),Object(X.jsx)("div",{style:{marginRight:12,fontWeight:500,color:"#87DEBF"},children:null===(t=o.thumbsUp)||void 0===t?void 0:t.length}),Object(X.jsx)("div",{disabled:c,onClick:function(){return l(!1)},className:"thumb",children:Object(X.jsx)(ne.a,{style:{color:"#DE8787",width:18,height:18,cursor:"pointer"}})}),Object(X.jsx)("div",{style:{fontWeight:500,color:"#DE8787"},children:null===(n=o.thumbsDown)||void 0===n?void 0:n.length})]})]})}var se=n(143),ce=n(42),ie=n.n(ce);var ae=function(e){var t=Object(h.g)(),n=t.sessionId,o=t.questionNodeId,s=Object(h.f)(),c=Object(r.useState)(void 0),i=Object(O.a)(c,2),a=i[0],l=i[1],d=Object(r.useState)(_.getIsOnline()),u=Object(O.a)(d,2),b=u[0],j=u[1],p=Object(r.useRef)();if(Object(r.useEffect)((function(){if(_.apiEventEmitter.on("update-is-online",(function(){j(_.getIsOnline())})),_.getNodeData()){var e=_.getNodeData()[o];l(e)}else _.requestNodeData(n);_.apiEventEmitter.on("nodes-update",(function(e){var t=e[o];l(t)}))}),[]),!_.getNodeData())return Object(X.jsx)("div",{children:"no node data yet"});if(!a)return Object(X.jsxs)("div",{children:["invalid question id: ",o]});var g=Object.values(null===a||void 0===a?void 0:a.answers)||[],x=a.question;function v(){return(v=Object(m.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.registerIfNeeded(n);case 2:e.sent&&(_.addAnswer(C.getUsername(),p.current.value,a.id,n),p.current.value="");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(X.jsxs)("div",{className:"container",children:[Object(X.jsx)(ie.a,{css:{visibility:"".concat(b?"hidden":"visible"),position:"relative",left:"15%",marginTop:"2%",width:"70%",borderRadius:10,background:"#95a5a6",color:"white"},title:"The session is currently offline, please contact session owner to restart session.",showBanner:!0}),Object(X.jsxs)("div",{className:"discussion",children:[Object(X.jsxs)("div",{onClick:function(){s.goBack()},style:{display:"flex",justifyContent:"flex-end",position:"static",top:12,right:12,alignItems:"center",cursor:"pointer"},children:[Object(X.jsx)("div",{style:{marginLeft:-5,height:25,width:25},children:Object(X.jsx)(se.a,{style:{color:"#B0B0B0"}})}),Object(X.jsx)("div",{style:{color:"#B0B0B0",fontSize:18},children:"Click To Close Discussion"})]}),Object(X.jsx)("div",{className:"discussion-title",children:Object(X.jsx)("div",{style:{marginBottom:"20px"},children:x})}),Object(X.jsxs)("div",{className:"discussion-body-container",children:[Object(X.jsx)("div",{className:"discussion-body",children:g.map((function(e){var t=e.id==a.correctAnswerId&&void 0!==e.id;return Object(X.jsx)(oe,{nodeId:a.id,item:e,isAnswer:t,disabled:!b})}))}),Object(X.jsx)("div",{style:{flex:1}})]}),Object(X.jsxs)("div",{className:"discussion-textbox",children:[Object(X.jsx)("textarea",{className:"discussion-textarea",ref:p}),Object(X.jsx)("div",{disabled:!b,className:"discussion-submit",onClick:function(){return v.apply(this,arguments)},children:"submit"})]})]})]})},le=n(21),de=n(145),ue=n(146),be=n(52);function he(e){var t=0;if(e.children){var n,r=Object(be.a)(e.children);try{for(r.s();!(n=r.n()).done;){t+=he(n.value)}}catch(s){r.e(s)}finally{r.f()}}var o=Math.max(1,t);return e.width=o,o}function je(e,t,n,r,o){var s=r+1,c=o,i=t,a=n;if(!e.has(i.id)){try{a[s].push(c)}catch(u){a.push([c])}if(e.add(i.id),i.children)for(var l=0;l<i.children.length;l++){var d=je(e,i.children[l],a,s,c);c=l<i.children.length-1?1+d:d}return c}}var pe={buildTree:function(e){for(var t=JSON.parse(JSON.stringify(e)),n=0,r=Object.values(t);n<r.length;n++){var o=r[n];t[o.parentId]&&(t[o.parentId].children?t[o.parentId].children.push(o):t[o.parentId].children=[o])}var s=Object.values(t).find((function(e){return null==e.parentId}));return he(s),s},byLevel:function(e){var t=[],n=[];je(new Set,e,n,-1,1);for(var r=[e];0!=r.length;){var o,s=[],c=Object(be.a)(r);try{for(c.s();!(o=c.n()).done;){var i=o.value.children;i&&(s=[].concat(Object(le.a)(s),Object(le.a)(i)))}}catch(d){c.e(d)}finally{c.f()}t.push(r),r=s}for(var a=0;a<t.length;a++)for(var l=0;l<t[a].length;l++)t[a][l].width=n[a][l];return t},dfs:je},fe=n(144);function me(e){var t=e.item,n=e.disabled,r=Object(h.f)(),o=Object(h.g)().sessionId;var s=t.answers&&t.answers[t.correctAnswerId];return Object(X.jsx)("th",{style:{width:"".concat(25,"em")},className:"tree-node",children:Object(X.jsxs)("div",{style:{display:"flex",marginLeft:"".concat(t.left_offset,"em")},children:[Object(X.jsxs)("div",{className:"tree-node-container",children:[Object(X.jsx)("p",{style:{color:"#8A99E7",fontWeight:800},children:t.question}),Object(X.jsxs)("div",{style:{display:"flex",marginBottom:12},children:[Object(X.jsx)("div",{style:{backgroundColor:"#8A99E7",minWidth:7,maxWidth:7,borderRadius:10,marginRight:12}}),Object(X.jsx)("p",{style:{wordBreak:"break-all"},children:void 0===s?"discussion in progress...":'"'.concat(s.content,'"')})]}),s&&Object(X.jsxs)("div",{style:{textAlign:"end"},children:["-",s.username]}),Object(X.jsxs)("div",{onClick:function(){r.push("discussion/".concat(t.id))},style:{display:"flex",marginBottom:8,alignItems:"center",cursor:"pointer"},children:[Object(X.jsx)("div",{style:{marginLeft:-5,height:25,width:25},children:Object(X.jsx)(fe.a,{style:{color:"#B0B0B0"}})}),Object(X.jsx)("div",{style:{color:"#B0B0B0"},children:"Click To View Discussion"})]})]}),Object(X.jsx)("button",{disabled:!n,onClick:function(){var e=prompt("Enter a question:");e&&_.addNode(C.getUsername(),e,t.id,o)},style:{padding:0,width:25,height:24,backgroundColor:"lightgray",alignSelf:"flex-end",marginBottom:8,marginLeft:8,borderRadius:20,cursor:"pointer"},children:Object(X.jsx)(de.a,{style:{width:20,height:20}})})]})})}var Oe=n(43),ge=n.n(Oe),xe=(n(126),function(){var e=Object(h.g)().sessionId,t=Object(h.f)(),n=Object(r.useState)({}),o=Object(O.a)(n,2),s=(o[0],o[1]),c=Object(r.useState)([]),i=Object(O.a)(c,2),a=i[0],l=i[1],d=Object(r.useState)(!1),b=Object(O.a)(d,2),j=b[0],p=b[1],v=Object(r.useState)(!1),y=Object(O.a)(v,2),w=y[0],k=y[1],I=Object(r.useState)(_.getIsOnline()),S=Object(O.a)(I,2),N=S[0],R=S[1],T={resourceTitle:"",resourceType:"article",resourceURL:""},D=Object(r.useState)([{resourceTitle:"Life of Pi",resourceURL:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",resourceType:"book"},{resourceTitle:"HowToWrite",resourceURL:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",resourceType:"video"}]),B=Object(O.a)(D,2),E=B[0],L=B[1],A=Object(r.useState)("https://www.shutterstock.com/blog/wp-content/uploads/sites/5/2017/08/nostalgia_design.jpg"),U=Object(O.a)(A,2),M=U[0],q=U[1];function z(){return(z=Object(m.a)(f.a.mark((function n(){var r,o,c,i,a,d,u;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=C.getUsername(),console.log("In Session: ".concat(_.isInSession())),!_.isInSession()){n.next=8;break}return o=pe.buildTree(_.getNodeData()),s(o),c=pe.byLevel(o),l(c),n.abrupt("return");case 8:return n.next=10,_.joinOrRestartSession(r,e);case 10:if((i=n.sent)&&!i.error){n.next=15;break}return alert(i.error?i.error:"failed to enter session"),t.push("/"),n.abrupt("return");case 15:if(null!==i.owner&&void 0!==i.owner&&_.setIsHost(i.owner),console.log("Room Status: Online: ".concat(i.online," Owner: ").concat(i.owner)),_.setIsOnline(!0===i.online),!1!==i.online){n.next=27;break}return a=i.room.nodes,d=pe.buildTree(a),s(d),u=pe.byLevel(d),l(u),_.setNodeData(a),_.setInSession(!0),n.abrupt("return");case 27:return _.setInSession(!0),n.next=30,_.socketConnect(e);case 30:_.requestNodeData(e);case 31:case"end":return n.stop()}}),n)})))).apply(this,arguments)}Object(r.useEffect)((function(){_.apiEventEmitter.on("update-is-online",(function(){R(_.getIsOnline())})),_.apiEventEmitter.on("nodes-update",(function(e){var t=pe.buildTree(e);s(t);var n=pe.byLevel(t);l(n)})),function(){z.apply(this,arguments)}(),t.listen((function(e,t){e.pathname.match("^/session")||_.socketDisconnect()}))}),[]);var H=a&&a[0]&&a[0][0]&&a[0][0].question||"loading question...";function W(e){T[e.target.name]=e.target.value}var G=25;return Object(X.jsxs)("div",{className:"container",style:{marginLeft:"".concat(j?9:0,"em")},children:[Object(X.jsx)("div",{className:"addResModal",style:{display:"".concat(w?"block":"none"),fontSize:"1.5em"},children:Object(X.jsxs)("div",{className:"addResModalContent",children:[Object(X.jsx)("p",{style:{marginTop:"4.5em"},children:"Add Resource"}),Object(X.jsxs)("div",{children:[Object(X.jsxs)("label",{children:["Resource Title: \xa0 \xa0",Object(X.jsx)("input",{name:"resourceTitle",onChange:W,style:{fontSize:"0.9em"}})]}),Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Object(X.jsxs)("label",{children:["URL: \xa0 \xa0",Object(X.jsx)("input",{name:"resourceURL",onChange:W,style:{fontSize:"0.9em"}})]}),Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),"Resource type: \xa0 \xa0",Object(X.jsxs)("select",{name:"resourceType",onChange:W,style:{fontSize:"0.9em"},children:[Object(X.jsx)("option",{selected:!0,value:"article",children:"Article"}),Object(X.jsx)("option",{value:"video",children:"Video"}),Object(X.jsx)("option",{value:"book",children:"Book"})]}),Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Object(X.jsx)("button",{onClick:function(){if(T.resourceTitle&&T.resourceType&&T.resourceURL){var e=E;e.push(T),L(e),k(!w)}else alert("One or more fields are empty")},style:{fontSize:"0.9em"},children:"Submit"})," \xa0 \xa0",Object(X.jsx)("button",{onClick:function(){k(!w)},style:{fontSize:"0.9em"},children:"Back"})]})]})}),Object(X.jsxs)(ge.a,{style:{position:"fixed",background:"#ecf0f1",maxWidth:"280px",boxShadow:"#80808082 5px 0px 20px"},onToggle:function(e){p(!j)},children:[Object(X.jsx)("a",{href:"http://localhost:3000/",className:"main-logo",style:Object(u.a)(Object(u.a)({display:"".concat(j?"inline-block":"none")},x.bold),{},{color:g.purple,textDecoration:"none"}),children:"Dialektik\xf3s"}),Object(X.jsx)(ge.a.Toggle,{style:{backgroundColor:g.purple}}),Object(X.jsxs)(ge.a.Nav,{children:[Object(X.jsx)("p",{className:"sidebar-text",style:{display:"".concat(j?"inline-block":"none")},children:"RESOURCES"}),Object(X.jsx)("br",{}),Object(X.jsxs)("button",{type:"button",disabled:!N,onClick:function(){k(!w)},className:"sidebar-text",style:{background:g.purple,borderRadius:20,width:"75%",height:"2em",marginBottom:"1em",display:"".concat(j?"inline-block":"none"),cursor:"pointer"},children:[Object(X.jsx)(de.a,{style:{width:20,height:20,backgroundColor:"white",borderRadius:10,marginRight:"0.5em"}})," Add Resources"]}),E.map((function(e,t){var n="";switch(e.resourceType){case"book":n="https://www.publicbooks.org/wp-content/uploads/2017/01/book-e1484158615982-810x327.jpg";break;case"article":n="https://images.unsplash.com/photo-1585241936939-be4099591252?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1050&q=80";break;case"video":n="https://images.unsplash.com/photo-1567443024551-f3e3cc2be870?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1000&q=80";break;default:n="https://images.unsplash.com/photo-1585241936939-be4099591252?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1050&q=80"}return Object(X.jsx)("a",{target:"_blank",href:e.resourceURL,style:Object(u.a)(Object(u.a)({textAlign:"center",width:"100%",height:"7em",backgroundSize:"cover",backgroundImage:'url("'.concat(n,'")'),marginBottom:"1em",display:"".concat(j?"inline-block":"none")},x.bold),{},{cursor:"pointer"}),children:Object(X.jsx)("p",{style:{marginBlockStart:0,marginBlockEnd:0,lineHeight:"7em",color:"white",background:"rgba(0, 0, 0, 0.479)"},children:e.resourceTitle})})}))]})]}),Object(X.jsxs)("div",{style:{top:0,left:0,position:"absolute",minWidth:"100%",minHeight:"12em",backgroundImage:'url("'.concat(M,'")'),backgroundSize:"cover",backgroundPosition:"center"},children:[Object(X.jsx)("button",{disabled:!N,onClick:function(){var e=prompt("Enter Image URL");e&&q(e)},style:{cursor:"pointer",position:"absolute",top:"1em",right:"1em",border:0,backgroundColor:"transparent"},children:Object(X.jsx)(ue.a,{style:{padding:"0.5em",width:30,height:30,backgroundColor:"white",borderRadius:"1.3em",marginRight:"0.5em"}})}),Object(X.jsx)(ie.a,{css:{visibility:"".concat(N?"hidden":"visible"),position:"relative",left:"15%",marginTop:"2%",width:"70%",borderRadius:10,background:"#95a5a6",color:"white"},title:"The session is currently offline, please contact session owner to restart session.",showBanner:!0})]}),Object(X.jsx)("p",{style:{fontWeight:800,fontSize:24,marginTop:"7em"},children:H}),Object(X.jsx)("button",{disabled:!N,onClick:function(){var t=prompt("Enter a question:");t&&a&&a[0]&&a[0][0]&&_.addNode(C.getUsername(),t,a[0][0].id,e)},style:{padding:0,width:25,height:24,backgroundColor:"lightgray",alignSelf:"flex-end",marginBottom:8,marginLeft:8,borderRadius:20,cursor:"pointer"},children:Object(X.jsx)(de.a,{style:{width:20,height:20}})}),a.slice(1).map((function(e,t){for(var n,r=[],o=[],s=[],c=e.map((function(e){return e.width})),i=Math.max.apply(Math,Object(le.a)(c)),a=!1,l=0,d=0;d<i;d++)c.includes(d+1)?(s.push(Object(X.jsx)(me,{item:e[l],disabled:N},"".concat(l,"node"))),e[l].parentId!=n?(n=e[l].parentId,o.push(Object(X.jsx)("th",{className:"tree-top"}))):o.push(Object(X.jsx)("th",{className:"tree-top-hide"})),e[l+1]&&e[l+1].parentId==e[l].parentId?(r.push(Object(X.jsx)("th",{style:{width:"".concat(G,"em")},className:"tree-bot-l"},"".concat(d))),a=!0):(r.push(Object(X.jsx)("th",{style:{width:"".concat(G,"em")},className:"tree-bot-single"},"".concat(d))),a=!1),l+=1):(o.push(Object(X.jsx)("th",{className:"tree-top-hide"})),a?r.push(Object(X.jsx)("th",{style:{width:"".concat(G,"em")},className:"tree-bot-roof"},"".concat(d))):r.push(Object(X.jsx)("th",{style:{width:"".concat(G,"em")},className:"tree-bot-hide"},"".concat(d))),s.push(Object(X.jsx)("th",{style:{width:"".concat(G,"em")},className:"tree-node"})));return Object(X.jsxs)("div",{children:[Object(X.jsx)("table",{className:"tree",style:{width:"".concat(i*G,"em")},children:Object(X.jsxs)("tbody",{children:[Object(X.jsx)("tr",{children:o}),Object(X.jsx)("tr",{children:r})]})}),Object(X.jsx)("table",{style:{width:"".concat(i*G,"em")},children:Object(X.jsx)("tbody",{children:Object(X.jsx)("tr",{children:s})})})]},"".concat(t))}))]})}),ve=function(){var e=Object(r.useState)(!1),t=Object(O.a)(e,2),n=t[0],o=t[1],s=Object(r.useRef)(),c=Object(r.useRef)();function i(){return a.apply(this,arguments)}function a(){return(a=Object(m.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.login(s.current.value,c.current.value);case 2:o(C.isLoggedIn());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n?Object(X.jsx)(h.a,{to:"/"}):Object(X.jsx)("div",{className:"fullscreen",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(X.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",height:300,width:280},children:[Object(X.jsx)("div",{style:Object(u.a)(Object(u.a)({},x.bold),{},{color:g.purple,fontSize:"4rem"}),children:"Dialektik\xf3s"}),Object(X.jsx)("input",{style:Object(u.a)(Object(u.a)({},x.bold),{},{boxSizing:"border-box",outline:0,border:0,borderRadius:8,backgroundColor:g.lightGray,height:50,width:"100%",padding:4,paddingLeft:14,marginBottom:8}),ref:s,placeholder:"username"}),Object(X.jsx)("input",{onKeyPress:function(e){"Enter"===e.key&&i()},type:"password",style:Object(u.a)(Object(u.a)({},x.bold),{},{boxSizing:"border-box",outline:0,border:0,borderRadius:8,backgroundColor:g.lightGray,height:50,width:"100%",padding:4,paddingLeft:14,marginBottom:8}),ref:c,placeholder:"password"}),Object(X.jsx)(K,{style:Object(u.a)(Object(u.a)({},x.bold),{},{backgroundColor:g.green,height:50,width:"100%",borderRadius:8,color:"white"}),onClick:i,children:Object(X.jsx)("div",{children:"LOGIN"})}),Object(X.jsxs)("div",{style:Object(u.a)(Object(u.a)({},x.bold),{},{color:g.gray,fontSize:13}),children:["Don't have an account? ",Object(X.jsx)("href",{style:{color:g.blue,textDecoration:"underline",cursor:"pointer"},children:"Create an account"})]})]})})};function ye(e){var t=e.component,n=Object(b.a)(e,["component"]);return Object(X.jsx)(h.b,Object(u.a)(Object(u.a)({},n),{},{render:function(){return C.isLoggedIn()?Object(X.jsx)(t,{}):Object(X.jsx)(h.a,{to:"/login"})}}))}var we=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={isLoggedIn:!1},e}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;C.userEventEmitter.on("login-update",(function(){e.setState({isLoggedIn:C.isLoggedIn()})}))}},{key:"render",value:function(){return Object(X.jsx)("div",{className:"fullscreen",children:Object(X.jsxs)(j.a,{children:[Object(X.jsx)(ye,{component:Z,path:"/",exact:!0}),Object(X.jsx)(h.b,{path:"/login",exact:!0,component:ve}),Object(X.jsx)(ye,{path:"/session/:sessionId/",exact:!0,component:xe}),Object(X.jsx)(ye,{path:"/session/:sessionId/discussion/:questionNodeId/",component:ae})]})})}}]),n}(r.Component),ke=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,147)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),o(e),s(e),c(e)}))};c.a.render(Object(X.jsx)(o.a.StrictMode,{children:Object(X.jsx)(we,{})}),document.getElementById("root")),ke()},53:function(e,t,n){},82:function(e,t,n){}},[[127,1,2]]]);
//# sourceMappingURL=main.32b20dde.chunk.js.map